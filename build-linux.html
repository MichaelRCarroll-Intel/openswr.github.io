
<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="OpenSWR : A High Performance, Highly Scalable software OpenGL implementation">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>OpenSWR</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="mesa_banner" href="https://cgit.freedesktop.org/mesa/mesa/tree/src/gallium/drivers/swr">View source in Mesa</a>

          <h1 id="project_title">OpenSWR</h1>
          <h2 id="project_tagline">A High Performance, Highly Scalable Software Rasterizer for OpenGL</h2>

            <section id="contact">
                For more information please <a href="mailto:openswr@googlegroups.com">send us an email</a>.
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">

<h2>Linux Build Instructions</h2>
<p>
  On Linux, OpenSWR is built using the standard autoconf package
  as described <a href="http://www.mesa3d.org/install.html">here</a>,
  with the addition of "swr" to the list of gallium drivers.
  Mesa requires some additional packages to build.  Please follow the Mesa
  instructions and make sure you install them.
  One of the major Mesa requirements is LLVM, but with some additional
  flags required.
<p>
  The instructions below describe how to compile Mesa using the
  Mesa released tarballs.
  Compiling directly from the git repository is more complicated
  and is beyond the scope of these instructions.
  If you want to compile from the git repository and you have problems,
  please contact us directly.
<p>
<h5>Instructions</h5>
<li>
  Download and unpack mesa.
  Please follow the instructions in
  <a href=http://www.mesa3d.org/download.html>
    http://www.mesa3d.org/download.html
  </a>
<li>
  cd into the directory you just extracted. (the root of the mesa distribution)
<li>
  Optional: If you don't have llvm installed,
  follow the steps below to install llvm,
  after you've downloaded it from the
  <a href="http://www.llvm.org">
    llvm website
  </a>.
  Please complete the <code>make</code> command
  with the correct <code>-j</code> parameter for your system
<pre>
<code style=display:inline-table;background-color:MidnightBlue;color:yellow>
  mkdir llvm
  cd llvm
  tar xfJ /path/to/llvm-x.y.z.src.tar.xz
  mkdir build root
  cd build
  cmake -G "Unix Makefiles" -DCMAKE_BUILD_TYPE=Release -DLLVM_TARGETS_TO_BUILD=X86 -DBUILD_SHARED_LIBS=1 -DLLVM_ENABLE_RTTI=1 -DCMAKE_INSTALL_PREFIX=$PWD/../root  ../llvm-x.y.z.src
  make -j10
  make install
  cd ..
  # Allow the mesa build to locate llvm
  export PATH=$PATH:$PWD/root/bin
  export LD_LIBRARY_PATH=$PWD/root/lib
  cd ..
</code>
</pre>

<li>
  Configure the mesa build with OpenSWR

<pre>
<code style=display:inline-table;background-color:MidnightBlue;color:yellow>
  ../configure --disable-dri --disable-egl --disable-gbm --with-gallium-drivers=swrast,swr --with-platforms=x11
</code>
</pre>

If you have VL in your system, you will need to also pass the following flags:

<pre>
<code style=display:inline-table;background-color:MidnightBlue;color:yellow>
  --disable-xvmc --disable-vdpau --disable-omx --disable-va
</code>
</pre>

If you want to compile OSMesa, please add the following flags:

<pre>
<code style=display:inline-table;background-color:MidnightBlue;color:yellow>
  --enable-gallium-osmesa
</code>
</pre>

By default, the build builds for AVX and AVX2 targets.  If you want to
also compile for Skylake and/or Knight's Landing architectures (AVX512),
please add the following flags.  Make sure your compiler supports the
necessery compiler flags to compile for the specified architectures.

<pre>
<code style=display:inline-table;background-color:MidnightBlue;color:yellow>
  --with-swr-archs=avx,avx2,skx,knl
</code>
</pre>

<li> Build mesa as follows.  As with the llvm build, pass in the correct <code>-j</code> parameter to <code>make</code> for your system

<pre>
<code style=display:inline-table;background-color:MidnightBlue;color:yellow>
  make -j10
</code>
</pre>

</li>

<p>
  The resulting libraries are in the lib/gallium directory.  Also, you'll
  have to set the <em>GALLIUM_DRIVER=swr</em> environment variable for
  mesa to use the SWR driver.  If not specified, the default mesa
  <em>llvmpipe</em> driver will be used.

<p>
  Please feel free to modify the above instructions to fit your needs.

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">OpenSWR maintained by <a href="https://github.com/OpenSWR">OpenSWR</a>
		<br>For information about compiler optimizations, see our <a href="https://software.intel.com/en-us/articles/optimization-notice#opt-en">Optimization Notice</a>.
		<br>&copy;2009-2018 Intel Corporation
		<br><a href="https://www.intel.com/privacy">Privacy</a></p>
      </footer>
    </div>

    

  </body>
</html>
